{"ast":null,"code":"var _jsxFileName = \"/storage/emulated/0/ASTRO/projects/react_2/src/components/App.js\";\nimport agent from '../agent';\nimport Header from './Header';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { APP_LOAD, REDIRECT } from '../constants/actionTypes';\nimport { Route, Switch } from 'react-router-dom';\nimport Article from '../components/Article';\nimport Editor from '../components/Editor';\nimport Home from '../components/Home';\nimport Login from '../components/Login';\nimport Profile from '../components/Profile';\nimport ProfileFavorites from '../components/ProfileFavorites';\nimport Register from '../components/Register';\nimport Settings from '../components/Settings';\nimport { store } from '../store';\nimport { push } from 'react-router-redux';\n\nconst mapStateToProps = state => {\n  return {\n    appLoaded: state.common.appLoaded,\n    appName: state.common.appName,\n    currentUser: state.common.currentUser,\n    redirectTo: state.common.redirectTo\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  onLoad: (payload, token) => dispatch({\n    type: APP_LOAD,\n    payload,\n    token,\n    skipTracking: true\n  }),\n  onRedirect: () => dispatch({\n    type: REDIRECT\n  })\n});\n\nclass App extends React.Component {\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.redirectTo) {\n      // this.context.router.replace(nextProps.redirectTo);\n      store.dispatch(push(nextProps.redirectTo));\n      this.props.onRedirect();\n    }\n  }\n\n  componentWillMount() {\n    const token = window && window.localStorage && window.localStorage.getItem('jwt');\n\n    if (token) {\n      agent.setToken(token);\n    }\n\n    this.props.onLoad(token ? agent.Auth.current() : null, token);\n  }\n\n  render() {\n    if (this.props.appLoaded) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        appName: this.props.appName,\n        currentUser: this.props.currentUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: Home,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/login\",\n        component: Login,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/register\",\n        component: Register,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/editor/:slug\",\n        component: Editor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/editor\",\n        component: Editor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/article/:id\",\n        component: Article,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/settings\",\n        component: Settings,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/@:username/favorites\",\n        component: ProfileFavorites,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/@:username\",\n        component: Profile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      appName: this.props.appName,\n      currentUser: this.props.currentUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }));\n  }\n\n} // App.contextTypes = {\n//   router: PropTypes.object.isRequired\n// };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/storage/emulated/0/ASTRO/projects/react_2/src/components/App.js"],"names":["agent","Header","React","connect","APP_LOAD","REDIRECT","Route","Switch","Article","Editor","Home","Login","Profile","ProfileFavorites","Register","Settings","store","push","mapStateToProps","state","appLoaded","common","appName","currentUser","redirectTo","mapDispatchToProps","dispatch","onLoad","payload","token","type","skipTracking","onRedirect","App","Component","componentWillReceiveProps","nextProps","props","componentWillMount","window","localStorage","getItem","setToken","Auth","current","render"],"mappings":"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","sourcesContent":["import agent from '../agent';\nimport Header from './Header';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { APP_LOAD, REDIRECT } from '../constants/actionTypes';\nimport { Route, Switch } from 'react-router-dom';\nimport Article from '../components/Article';\nimport Editor from '../components/Editor';\nimport Home from '../components/Home';\nimport Login from '../components/Login';\nimport Profile from '../components/Profile';\nimport ProfileFavorites from '../components/ProfileFavorites';\nimport Register from '../components/Register';\nimport Settings from '../components/Settings';\nimport { store } from '../store';\nimport { push } from 'react-router-redux';\n\nconst mapStateToProps = state => {\n  return {\n    appLoaded: state.common.appLoaded,\n    appName: state.common.appName,\n    currentUser: state.common.currentUser,\n    redirectTo: state.common.redirectTo\n  }};\n\nconst mapDispatchToProps = dispatch => ({\n  onLoad: (payload, token) =>\n    dispatch({ type: APP_LOAD, payload, token, skipTracking: true }),\n  onRedirect: () =>\n    dispatch({ type: REDIRECT })\n});\n\nclass App extends React.Component {\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.redirectTo) {\n      // this.context.router.replace(nextProps.redirectTo);\n      store.dispatch(push(nextProps.redirectTo));\n      this.props.onRedirect();\n    }\n  }\n\n  componentWillMount() {\n    const token = window && window.localStorage && window.localStorage.getItem('jwt');\n    if (token) {\n      agent.setToken(token);\n    }\n\n    this.props.onLoad(token ? agent.Auth.current() : null, token);\n  }\n\n  render() {\n    if (this.props.appLoaded) {\n      return (\n        <div>\n          <Header\n            appName={this.props.appName}\n            currentUser={this.props.currentUser} />\n            <Switch>\n            <Route exact path=\"/\" component={Home}/>\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/register\" component={Register} />\n            <Route path=\"/editor/:slug\" component={Editor} />\n            <Route path=\"/editor\" component={Editor} />\n            <Route path=\"/article/:id\" component={Article} />\n            <Route path=\"/settings\" component={Settings} />\n            <Route path=\"/@:username/favorites\" component={ProfileFavorites} />\n            <Route path=\"/@:username\" component={Profile} />\n            </Switch>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <Header\n          appName={this.props.appName}\n          currentUser={this.props.currentUser} />\n      </div>\n    );\n  }\n}\n\n// App.contextTypes = {\n//   router: PropTypes.object.isRequired\n// };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}