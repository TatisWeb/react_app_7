{"ast":null,"code":"import _objectSpread from\"/data/data/com.astrosohu/files/usr/lib/node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{APP_LOAD,REDIRECT,LOGOUT,ARTICLE_SUBMITTED,SETTINGS_SAVED,LOGIN,REGISTER,DELETE_ARTICLE,ARTICLE_PAGE_UNLOADED,EDITOR_PAGE_UNLOADED,HOME_PAGE_UNLOADED,PROFILE_PAGE_UNLOADED,PROFILE_FAVORITES_PAGE_UNLOADED,SETTINGS_PAGE_UNLOADED,LOGIN_PAGE_UNLOADED,REGISTER_PAGE_UNLOADED}from'../constants/actionTypes';var defaultState={appName:'Conduit',token:null,viewChangeCounter:0};export default(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case APP_LOAD:return _objectSpread(_objectSpread({},state),{},{token:action.token||null,appLoaded:true,currentUser:action.payload?action.payload.user:null});case REDIRECT:return _objectSpread(_objectSpread({},state),{},{redirectTo:null});case LOGOUT:return _objectSpread(_objectSpread({},state),{},{redirectTo:'/',token:null,currentUser:null});case ARTICLE_SUBMITTED:var redirectUrl=\"/article/\".concat(action.payload.article.slug);return _objectSpread(_objectSpread({},state),{},{redirectTo:redirectUrl});case SETTINGS_SAVED:return _objectSpread(_objectSpread({},state),{},{redirectTo:action.error?null:'/',currentUser:action.error?null:action.payload.user});case LOGIN:case REGISTER:return _objectSpread(_objectSpread({},state),{},{redirectTo:action.error?null:'/',token:action.error?null:action.payload.user.token,currentUser:action.error?null:action.payload.user});case DELETE_ARTICLE:return _objectSpread(_objectSpread({},state),{},{redirectTo:'/'});case ARTICLE_PAGE_UNLOADED:case EDITOR_PAGE_UNLOADED:case HOME_PAGE_UNLOADED:case PROFILE_PAGE_UNLOADED:case PROFILE_FAVORITES_PAGE_UNLOADED:case SETTINGS_PAGE_UNLOADED:case LOGIN_PAGE_UNLOADED:case REGISTER_PAGE_UNLOADED:return _objectSpread(_objectSpread({},state),{},{viewChangeCounter:state.viewChangeCounter+1});default:return state;}});","map":{"version":3,"sources":["/storage/emulated/0/ASTRO/projects/react_2/src/reducers/common.js"],"names":["APP_LOAD","REDIRECT","LOGOUT","ARTICLE_SUBMITTED","SETTINGS_SAVED","LOGIN","REGISTER","DELETE_ARTICLE","ARTICLE_PAGE_UNLOADED","EDITOR_PAGE_UNLOADED","HOME_PAGE_UNLOADED","PROFILE_PAGE_UNLOADED","PROFILE_FAVORITES_PAGE_UNLOADED","SETTINGS_PAGE_UNLOADED","LOGIN_PAGE_UNLOADED","REGISTER_PAGE_UNLOADED","defaultState","appName","token","viewChangeCounter","state","action","type","appLoaded","currentUser","payload","user","redirectTo","redirectUrl","article","slug","error"],"mappings":"uLAAA,OACEA,QADF,CAEEC,QAFF,CAGEC,MAHF,CAIEC,iBAJF,CAKEC,cALF,CAMEC,KANF,CAOEC,QAPF,CAQEC,cARF,CASEC,qBATF,CAUEC,oBAVF,CAWEC,kBAXF,CAYEC,qBAZF,CAaEC,+BAbF,CAcEC,sBAdF,CAeEC,mBAfF,CAgBEC,sBAhBF,KAiBO,0BAjBP,CAmBA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,OAAO,CAAE,SADU,CAEnBC,KAAK,CAAE,IAFY,CAGnBC,iBAAiB,CAAE,CAHA,CAArB,CAMA,eAAe,UAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBJ,YAAyB,IAAXK,CAAAA,MAAW,2CAC/C,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKtB,CAAAA,QAAL,CACE,sCACKoB,KADL,MAEEF,KAAK,CAAEG,MAAM,CAACH,KAAP,EAAgB,IAFzB,CAGEK,SAAS,CAAE,IAHb,CAIEC,WAAW,CAAEH,MAAM,CAACI,OAAP,CAAiBJ,MAAM,CAACI,OAAP,CAAeC,IAAhC,CAAuC,IAJtD,GAMF,IAAKzB,CAAAA,QAAL,CACE,sCAAYmB,KAAZ,MAAmBO,UAAU,CAAE,IAA/B,GACF,IAAKzB,CAAAA,MAAL,CACE,sCAAYkB,KAAZ,MAAmBO,UAAU,CAAE,GAA/B,CAAoCT,KAAK,CAAE,IAA3C,CAAiDM,WAAW,CAAE,IAA9D,GACF,IAAKrB,CAAAA,iBAAL,CACE,GAAMyB,CAAAA,WAAW,oBAAeP,MAAM,CAACI,OAAP,CAAeI,OAAf,CAAuBC,IAAtC,CAAjB,CACA,sCAAYV,KAAZ,MAAmBO,UAAU,CAAEC,WAA/B,GACF,IAAKxB,CAAAA,cAAL,CACE,sCACKgB,KADL,MAEEO,UAAU,CAAEN,MAAM,CAACU,KAAP,CAAe,IAAf,CAAsB,GAFpC,CAGEP,WAAW,CAAEH,MAAM,CAACU,KAAP,CAAe,IAAf,CAAsBV,MAAM,CAACI,OAAP,CAAeC,IAHpD,GAKF,IAAKrB,CAAAA,KAAL,CACA,IAAKC,CAAAA,QAAL,CACE,sCACKc,KADL,MAEEO,UAAU,CAAEN,MAAM,CAACU,KAAP,CAAe,IAAf,CAAsB,GAFpC,CAGEb,KAAK,CAAEG,MAAM,CAACU,KAAP,CAAe,IAAf,CAAsBV,MAAM,CAACI,OAAP,CAAeC,IAAf,CAAoBR,KAHnD,CAIEM,WAAW,CAAEH,MAAM,CAACU,KAAP,CAAe,IAAf,CAAsBV,MAAM,CAACI,OAAP,CAAeC,IAJpD,GAMF,IAAKnB,CAAAA,cAAL,CACE,sCAAYa,KAAZ,MAAmBO,UAAU,CAAE,GAA/B,GACF,IAAKnB,CAAAA,qBAAL,CACA,IAAKC,CAAAA,oBAAL,CACA,IAAKC,CAAAA,kBAAL,CACA,IAAKC,CAAAA,qBAAL,CACA,IAAKC,CAAAA,+BAAL,CACA,IAAKC,CAAAA,sBAAL,CACA,IAAKC,CAAAA,mBAAL,CACA,IAAKC,CAAAA,sBAAL,CACE,sCAAYK,KAAZ,MAAmBD,iBAAiB,CAAEC,KAAK,CAACD,iBAAN,CAA0B,CAAhE,GACF,QACE,MAAOC,CAAAA,KAAP,CAzCJ,CA2CD,CA5CD","sourcesContent":["import {\n  APP_LOAD,\n  REDIRECT,\n  LOGOUT,\n  ARTICLE_SUBMITTED,\n  SETTINGS_SAVED,\n  LOGIN,\n  REGISTER,\n  DELETE_ARTICLE,\n  ARTICLE_PAGE_UNLOADED,\n  EDITOR_PAGE_UNLOADED,\n  HOME_PAGE_UNLOADED,\n  PROFILE_PAGE_UNLOADED,\n  PROFILE_FAVORITES_PAGE_UNLOADED,\n  SETTINGS_PAGE_UNLOADED,\n  LOGIN_PAGE_UNLOADED,\n  REGISTER_PAGE_UNLOADED\n} from '../constants/actionTypes';\n\nconst defaultState = {\n  appName: 'Conduit',\n  token: null,\n  viewChangeCounter: 0\n};\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case APP_LOAD:\n      return {\n        ...state,\n        token: action.token || null,\n        appLoaded: true,\n        currentUser: action.payload ? action.payload.user : null\n      };\n    case REDIRECT:\n      return { ...state, redirectTo: null };\n    case LOGOUT:\n      return { ...state, redirectTo: '/', token: null, currentUser: null };\n    case ARTICLE_SUBMITTED:\n      const redirectUrl = `/article/${action.payload.article.slug}`;\n      return { ...state, redirectTo: redirectUrl };\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        currentUser: action.error ? null : action.payload.user\n      };\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        token: action.error ? null : action.payload.user.token,\n        currentUser: action.error ? null : action.payload.user\n      };\n    case DELETE_ARTICLE:\n      return { ...state, redirectTo: '/' };\n    case ARTICLE_PAGE_UNLOADED:\n    case EDITOR_PAGE_UNLOADED:\n    case HOME_PAGE_UNLOADED:\n    case PROFILE_PAGE_UNLOADED:\n    case PROFILE_FAVORITES_PAGE_UNLOADED:\n    case SETTINGS_PAGE_UNLOADED:\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return { ...state, viewChangeCounter: state.viewChangeCounter + 1 };\n    default:\n      return state;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}