{"ast":null,"code":"var _jsxFileName = \"/storage/emulated/0/ASTRO/projects/react_2/src/components/Article/index.js\";\nimport ArticleMeta from './ArticleMeta';\nimport CommentContainer from './CommentContainer';\nimport React from 'react';\nimport agent from '../../agent';\nimport { connect } from 'react-redux';\nimport marked from 'marked';\nimport { ARTICLE_PAGE_LOADED, ARTICLE_PAGE_UNLOADED } from '../../constants/actionTypes';\n\nconst mapStateToProps = state => ({ ...state.article,\n  currentUser: state.common.currentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onLoad: payload => dispatch({\n    type: ARTICLE_PAGE_LOADED,\n    payload\n  }),\n  onUnload: () => dispatch({\n    type: ARTICLE_PAGE_UNLOADED\n  })\n});\n\nclass Article extends React.Component {\n  componentWillMount() {\n    this.props.onLoad(Promise.all([agent.Articles.get(this.props.match.params.id), agent.Comments.forArticle(this.props.match.params.id)]));\n  }\n\n  componentWillUnmount() {\n    this.props.onUnload();\n  }\n\n  render() {\n    if (!this.props.article) {\n      return null;\n    }\n\n    const markup = {\n      __html: marked(this.props.article.body, {\n        sanitize: true\n      })\n    };\n    const canModify = this.props.currentUser && this.props.currentUser.username === this.props.article.author.username;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"article-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"banner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, this.props.article.title), /*#__PURE__*/React.createElement(ArticleMeta, {\n      article: this.props.article,\n      canModify: canModify,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row article-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: markup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"tag-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, this.props.article.tagList.map(tag => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"tag-default tag-pill tag-outline\",\n        key: tag,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 23\n        }\n      }, tag);\n    })))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"article-actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CommentContainer, {\n      comments: this.props.comments || [],\n      errors: this.props.commentErrors,\n      slug: this.props.match.params.id,\n      currentUser: this.props.currentUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Article);","map":{"version":3,"sources":["/storage/emulated/0/ASTRO/projects/react_2/src/components/Article/index.js"],"names":["ArticleMeta","CommentContainer","React","agent","connect","marked","ARTICLE_PAGE_LOADED","ARTICLE_PAGE_UNLOADED","mapStateToProps","state","article","currentUser","common","mapDispatchToProps","dispatch","onLoad","payload","type","onUnload","Article","Component","componentWillMount","props","Promise","all","Articles","get","match","params","id","Comments","forArticle","componentWillUnmount","render","markup","__html","body","sanitize","canModify","username","author","title","tagList","map","tag","comments","commentErrors"],"mappings":"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","sourcesContent":["import ArticleMeta from './ArticleMeta';\nimport CommentContainer from './CommentContainer';\nimport React from 'react';\nimport agent from '../../agent';\nimport { connect } from 'react-redux';\nimport marked from 'marked';\nimport { ARTICLE_PAGE_LOADED, ARTICLE_PAGE_UNLOADED } from '../../constants/actionTypes';\n\nconst mapStateToProps = state => ({\n  ...state.article,\n  currentUser: state.common.currentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onLoad: payload =>\n    dispatch({ type: ARTICLE_PAGE_LOADED, payload }),\n  onUnload: () =>\n    dispatch({ type: ARTICLE_PAGE_UNLOADED })\n});\n\nclass Article extends React.Component {\n  componentWillMount() {\n    this.props.onLoad(Promise.all([\n      agent.Articles.get(this.props.match.params.id),\n      agent.Comments.forArticle(this.props.match.params.id)\n    ]));\n  }\n\n  componentWillUnmount() {\n    this.props.onUnload();\n  }\n\n  render() {\n    if (!this.props.article) {\n      return null;\n    }\n\n    const markup = { __html: marked(this.props.article.body, { sanitize: true }) };\n    const canModify = this.props.currentUser &&\n      this.props.currentUser.username === this.props.article.author.username;\n    return (\n      <div className=\"article-page\">\n\n        <div className=\"banner\">\n          <div className=\"container\">\n\n            <h1>{this.props.article.title}</h1>\n            <ArticleMeta\n              article={this.props.article}\n              canModify={canModify} />\n\n          </div>\n        </div>\n\n        <div className=\"container page\">\n\n          <div className=\"row article-content\">\n            <div className=\"col-xs-12\">\n\n              <div dangerouslySetInnerHTML={markup}></div>\n\n              <ul className=\"tag-list\">\n                {\n                  this.props.article.tagList.map(tag => {\n                    return (\n                      <li\n                        className=\"tag-default tag-pill tag-outline\"\n                        key={tag}>\n                        {tag}\n                      </li>\n                    );\n                  })\n                }\n              </ul>\n\n            </div>\n          </div>\n\n          <hr />\n\n          <div className=\"article-actions\">\n          </div>\n\n          <div className=\"row\">\n            <CommentContainer\n              comments={this.props.comments || []}\n              errors={this.props.commentErrors}\n              slug={this.props.match.params.id}\n              currentUser={this.props.currentUser} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Article);\n"]},"metadata":{},"sourceType":"module"}