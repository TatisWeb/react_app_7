{"ast":null,"code":"/**\n * Promise wrapper for superagent\n */\nfunction wrap(superagent, Promise) {\n  /**\n   * Request object similar to superagent.Request, but with end() returning\n   * a promise.\n   */\n  function PromiseRequest() {\n    superagent.Request.apply(this, arguments);\n  } // Inherit form superagent.Request\n\n\n  PromiseRequest.prototype = Object.create(superagent.Request.prototype);\n  /** Send request and get a promise that `end` was emitted */\n\n  PromiseRequest.prototype.end = function (cb) {\n    var _end = superagent.Request.prototype.end;\n    var self = this;\n    return new Promise(function (accept, reject) {\n      _end.call(self, function (err, response) {\n        if (cb) {\n          cb(err, response);\n        }\n\n        if (err) {\n          err.response = response;\n          reject(err);\n        } else {\n          accept(response);\n        }\n      });\n    });\n  };\n  /** Provide a more promise-y interface */\n\n\n  PromiseRequest.prototype.then = function (resolve, reject) {\n    var _end = superagent.Request.prototype.end;\n    var self = this;\n    return new Promise(function (accept, reject) {\n      _end.call(self, function (err, response) {\n        if (err) {\n          err.response = response;\n          reject(err);\n        } else {\n          accept(response);\n        }\n      });\n    }).then(resolve, reject);\n  };\n  /**\n   * Request builder with same interface as superagent.\n   * It is convenient to import this as `request` in place of superagent.\n   */\n\n\n  var request = function request(method, url) {\n    return new PromiseRequest(method, url);\n  };\n  /** Helper for making an options request */\n\n\n  request.options = function (url) {\n    return request('OPTIONS', url);\n  };\n  /** Helper for making a head request */\n\n\n  request.head = function (url, data) {\n    var req = request('HEAD', url);\n\n    if (data) {\n      req.send(data);\n    }\n\n    return req;\n  };\n  /** Helper for making a get request */\n\n\n  request.get = function (url, data) {\n    var req = request('GET', url);\n\n    if (data) {\n      req.query(data);\n    }\n\n    return req;\n  };\n  /** Helper for making a post request */\n\n\n  request.post = function (url, data) {\n    var req = request('POST', url);\n\n    if (data) {\n      req.send(data);\n    }\n\n    return req;\n  };\n  /** Helper for making a put request */\n\n\n  request.put = function (url, data) {\n    var req = request('PUT', url);\n\n    if (data) {\n      req.send(data);\n    }\n\n    return req;\n  };\n  /** Helper for making a patch request */\n\n\n  request.patch = function (url, data) {\n    var req = request('PATCH', url);\n\n    if (data) {\n      req.send(data);\n    }\n\n    return req;\n  };\n  /** Helper for making a delete request */\n\n\n  request.del = function (url) {\n    return request('DELETE', url);\n  }; // Export the request builder\n\n\n  return request;\n}\n\nmodule.exports = wrap;","map":{"version":3,"sources":["/storage/emulated/0/ASTRO/projects/react_2/node_modules/superagent-promise/index.js"],"names":["wrap","superagent","Promise","PromiseRequest","Request","apply","arguments","prototype","Object","create","end","cb","_end","self","accept","reject","call","err","response","then","resolve","request","method","url","options","head","data","req","send","get","query","post","put","patch","del","module","exports"],"mappings":"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","sourcesContent":["/**\n * Promise wrapper for superagent\n */\n\nfunction wrap(superagent, Promise) {\n  /**\n   * Request object similar to superagent.Request, but with end() returning\n   * a promise.\n   */\n  function PromiseRequest() {\n    superagent.Request.apply(this, arguments);\n  }\n\n  // Inherit form superagent.Request\n  PromiseRequest.prototype = Object.create(superagent.Request.prototype);\n\n  /** Send request and get a promise that `end` was emitted */\n  PromiseRequest.prototype.end = function(cb) {\n    var _end = superagent.Request.prototype.end;\n    var self = this;\n\n    return new Promise(function(accept, reject) {\n      _end.call(self, function(err, response) {\n        if (cb) {\n          cb(err, response);\n        }\n\n        if (err) {\n          err.response = response;\n          reject(err);\n        } else {\n          accept(response);\n        }\n      });\n    });\n  };\n\n  /** Provide a more promise-y interface */\n  PromiseRequest.prototype.then = function(resolve, reject) {\n    var _end = superagent.Request.prototype.end;\n    var self = this;\n\n    return new Promise(function(accept, reject) {\n      _end.call(self, function(err, response) {\n        if (err) {\n          err.response = response;\n          reject(err);\n        } else {\n          accept(response);\n        }\n      });\n    }).then(resolve, reject);\n  };\n\n  /**\n   * Request builder with same interface as superagent.\n   * It is convenient to import this as `request` in place of superagent.\n   */\n  var request = function(method, url) {\n    return new PromiseRequest(method, url);\n  };\n\n  /** Helper for making an options request */\n  request.options = function(url) {\n    return request('OPTIONS', url);\n  }\n\n  /** Helper for making a head request */\n  request.head = function(url, data) {\n    var req = request('HEAD', url);\n    if (data) {\n      req.send(data);\n    }\n    return req;\n  };\n\n  /** Helper for making a get request */\n  request.get = function(url, data) {\n    var req = request('GET', url);\n    if (data) {\n      req.query(data);\n    }\n    return req;\n  };\n\n  /** Helper for making a post request */\n  request.post = function(url, data) {\n    var req = request('POST', url);\n    if (data) {\n      req.send(data);\n    }\n    return req;\n  };\n\n  /** Helper for making a put request */\n  request.put = function(url, data) {\n    var req = request('PUT', url);\n    if (data) {\n      req.send(data);\n    }\n    return req;\n  };\n\n  /** Helper for making a patch request */\n  request.patch = function(url, data) {\n    var req = request('PATCH', url);\n    if (data) {\n      req.send(data);\n    }\n    return req;\n  };\n\n  /** Helper for making a delete request */\n  request.del = function(url) {\n    return request('DELETE', url);\n  };\n\n  // Export the request builder\n  return request;\n}\n\nmodule.exports = wrap;\n"]},"metadata":{},"sourceType":"script"}