{"ast":null,"code":"import { APP_LOAD, REDIRECT, LOGOUT, ARTICLE_SUBMITTED, SETTINGS_SAVED, LOGIN, REGISTER, DELETE_ARTICLE, ARTICLE_PAGE_UNLOADED, EDITOR_PAGE_UNLOADED, HOME_PAGE_UNLOADED, PROFILE_PAGE_UNLOADED, PROFILE_FAVORITES_PAGE_UNLOADED, SETTINGS_PAGE_UNLOADED, LOGIN_PAGE_UNLOADED, REGISTER_PAGE_UNLOADED } from '../constants/actionTypes';\nconst defaultState = {\n  appName: 'Conduit',\n  token: null,\n  viewChangeCounter: 0\n};\nexport default ((state = defaultState, action) => {\n  switch (action.type) {\n    case APP_LOAD:\n      return { ...state,\n        token: action.token || null,\n        appLoaded: true,\n        currentUser: action.payload ? action.payload.user : null\n      };\n\n    case REDIRECT:\n      return { ...state,\n        redirectTo: null\n      };\n\n    case LOGOUT:\n      return { ...state,\n        redirectTo: '/',\n        token: null,\n        currentUser: null\n      };\n\n    case ARTICLE_SUBMITTED:\n      const redirectUrl = `/article/${action.payload.article.slug}`;\n      return { ...state,\n        redirectTo: redirectUrl\n      };\n\n    case SETTINGS_SAVED:\n      return { ...state,\n        redirectTo: action.error ? null : '/',\n        currentUser: action.error ? null : action.payload.user\n      };\n\n    case LOGIN:\n    case REGISTER:\n      return { ...state,\n        redirectTo: action.error ? null : '/',\n        token: action.error ? null : action.payload.user.token,\n        currentUser: action.error ? null : action.payload.user\n      };\n\n    case DELETE_ARTICLE:\n      return { ...state,\n        redirectTo: '/'\n      };\n\n    case ARTICLE_PAGE_UNLOADED:\n    case EDITOR_PAGE_UNLOADED:\n    case HOME_PAGE_UNLOADED:\n    case PROFILE_PAGE_UNLOADED:\n    case PROFILE_FAVORITES_PAGE_UNLOADED:\n    case SETTINGS_PAGE_UNLOADED:\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return { ...state,\n        viewChangeCounter: state.viewChangeCounter + 1\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/storage/emulated/0/ASTRO/projects/react_2/src/reducers/common.js"],"names":["APP_LOAD","REDIRECT","LOGOUT","ARTICLE_SUBMITTED","SETTINGS_SAVED","LOGIN","REGISTER","DELETE_ARTICLE","ARTICLE_PAGE_UNLOADED","EDITOR_PAGE_UNLOADED","HOME_PAGE_UNLOADED","PROFILE_PAGE_UNLOADED","PROFILE_FAVORITES_PAGE_UNLOADED","SETTINGS_PAGE_UNLOADED","LOGIN_PAGE_UNLOADED","REGISTER_PAGE_UNLOADED","defaultState","appName","token","viewChangeCounter","state","action","type","appLoaded","currentUser","payload","user","redirectTo","redirectUrl","article","slug","error"],"mappings":"AAAA,SACEA,QADF,EAEEC,QAFF,EAGEC,MAHF,EAIEC,iBAJF,EAKEC,cALF,EAMEC,KANF,EAOEC,QAPF,EAQEC,cARF,EASEC,qBATF,EAUEC,oBAVF,EAWEC,kBAXF,EAYEC,qBAZF,EAaEC,+BAbF,EAcEC,sBAdF,EAeEC,mBAfF,EAgBEC,sBAhBF,QAiBO,0BAjBP;AAmBA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,OAAO,EAAE,SADU;AAEnBC,EAAAA,KAAK,EAAE,IAFY;AAGnBC,EAAAA,iBAAiB,EAAE;AAHA,CAArB;AAMA,gBAAe,CAACC,KAAK,GAAGJ,YAAT,EAAuBK,MAAvB,KAAkC;AAC/C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKtB,QAAL;AACE,aAAO,EACL,GAAGoB,KADE;AAELF,QAAAA,KAAK,EAAEG,MAAM,CAACH,KAAP,IAAgB,IAFlB;AAGLK,QAAAA,SAAS,EAAE,IAHN;AAILC,QAAAA,WAAW,EAAEH,MAAM,CAACI,OAAP,GAAiBJ,MAAM,CAACI,OAAP,CAAeC,IAAhC,GAAuC;AAJ/C,OAAP;;AAMF,SAAKzB,QAAL;AACE,aAAO,EAAE,GAAGmB,KAAL;AAAYO,QAAAA,UAAU,EAAE;AAAxB,OAAP;;AACF,SAAKzB,MAAL;AACE,aAAO,EAAE,GAAGkB,KAAL;AAAYO,QAAAA,UAAU,EAAE,GAAxB;AAA6BT,QAAAA,KAAK,EAAE,IAApC;AAA0CM,QAAAA,WAAW,EAAE;AAAvD,OAAP;;AACF,SAAKrB,iBAAL;AACE,YAAMyB,WAAW,GAAI,YAAWP,MAAM,CAACI,OAAP,CAAeI,OAAf,CAAuBC,IAAK,EAA5D;AACA,aAAO,EAAE,GAAGV,KAAL;AAAYO,QAAAA,UAAU,EAAEC;AAAxB,OAAP;;AACF,SAAKxB,cAAL;AACE,aAAO,EACL,GAAGgB,KADE;AAELO,QAAAA,UAAU,EAAEN,MAAM,CAACU,KAAP,GAAe,IAAf,GAAsB,GAF7B;AAGLP,QAAAA,WAAW,EAAEH,MAAM,CAACU,KAAP,GAAe,IAAf,GAAsBV,MAAM,CAACI,OAAP,CAAeC;AAH7C,OAAP;;AAKF,SAAKrB,KAAL;AACA,SAAKC,QAAL;AACE,aAAO,EACL,GAAGc,KADE;AAELO,QAAAA,UAAU,EAAEN,MAAM,CAACU,KAAP,GAAe,IAAf,GAAsB,GAF7B;AAGLb,QAAAA,KAAK,EAAEG,MAAM,CAACU,KAAP,GAAe,IAAf,GAAsBV,MAAM,CAACI,OAAP,CAAeC,IAAf,CAAoBR,KAH5C;AAILM,QAAAA,WAAW,EAAEH,MAAM,CAACU,KAAP,GAAe,IAAf,GAAsBV,MAAM,CAACI,OAAP,CAAeC;AAJ7C,OAAP;;AAMF,SAAKnB,cAAL;AACE,aAAO,EAAE,GAAGa,KAAL;AAAYO,QAAAA,UAAU,EAAE;AAAxB,OAAP;;AACF,SAAKnB,qBAAL;AACA,SAAKC,oBAAL;AACA,SAAKC,kBAAL;AACA,SAAKC,qBAAL;AACA,SAAKC,+BAAL;AACA,SAAKC,sBAAL;AACA,SAAKC,mBAAL;AACA,SAAKC,sBAAL;AACE,aAAO,EAAE,GAAGK,KAAL;AAAYD,QAAAA,iBAAiB,EAAEC,KAAK,CAACD,iBAAN,GAA0B;AAAzD,OAAP;;AACF;AACE,aAAOC,KAAP;AAzCJ;AA2CD,CA5CD","sourcesContent":["import {\n  APP_LOAD,\n  REDIRECT,\n  LOGOUT,\n  ARTICLE_SUBMITTED,\n  SETTINGS_SAVED,\n  LOGIN,\n  REGISTER,\n  DELETE_ARTICLE,\n  ARTICLE_PAGE_UNLOADED,\n  EDITOR_PAGE_UNLOADED,\n  HOME_PAGE_UNLOADED,\n  PROFILE_PAGE_UNLOADED,\n  PROFILE_FAVORITES_PAGE_UNLOADED,\n  SETTINGS_PAGE_UNLOADED,\n  LOGIN_PAGE_UNLOADED,\n  REGISTER_PAGE_UNLOADED\n} from '../constants/actionTypes';\n\nconst defaultState = {\n  appName: 'Conduit',\n  token: null,\n  viewChangeCounter: 0\n};\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case APP_LOAD:\n      return {\n        ...state,\n        token: action.token || null,\n        appLoaded: true,\n        currentUser: action.payload ? action.payload.user : null\n      };\n    case REDIRECT:\n      return { ...state, redirectTo: null };\n    case LOGOUT:\n      return { ...state, redirectTo: '/', token: null, currentUser: null };\n    case ARTICLE_SUBMITTED:\n      const redirectUrl = `/article/${action.payload.article.slug}`;\n      return { ...state, redirectTo: redirectUrl };\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        currentUser: action.error ? null : action.payload.user\n      };\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        token: action.error ? null : action.payload.user.token,\n        currentUser: action.error ? null : action.payload.user\n      };\n    case DELETE_ARTICLE:\n      return { ...state, redirectTo: '/' };\n    case ARTICLE_PAGE_UNLOADED:\n    case EDITOR_PAGE_UNLOADED:\n    case HOME_PAGE_UNLOADED:\n    case PROFILE_PAGE_UNLOADED:\n    case PROFILE_FAVORITES_PAGE_UNLOADED:\n    case SETTINGS_PAGE_UNLOADED:\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return { ...state, viewChangeCounter: state.viewChangeCounter + 1 };\n    default:\n      return state;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}