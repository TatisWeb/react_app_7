{"ast":null,"code":"import superagentPromise from'superagent-promise';import _superagent from'superagent';var superagent=superagentPromise(_superagent,global.Promise);var API_ROOT='https://conduit.productionready.io/api';var encode=encodeURIComponent;var responseBody=function responseBody(res){return res.body;};var token=null;var tokenPlugin=function tokenPlugin(req){if(token){req.set('authorization',\"Token \".concat(token));}};var requests={del:function del(url){return superagent.del(\"\".concat(API_ROOT).concat(url)).use(tokenPlugin).then(responseBody);},get:function get(url){return superagent.get(\"\".concat(API_ROOT).concat(url)).use(tokenPlugin).then(responseBody);},put:function put(url,body){return superagent.put(\"\".concat(API_ROOT).concat(url),body).use(tokenPlugin).then(responseBody);},post:function post(url,body){return superagent.post(\"\".concat(API_ROOT).concat(url),body).use(tokenPlugin).then(responseBody);}};var Auth={current:function current(){return requests.get('/user');},login:function login(email,password){return requests.post('/users/login',{user:{email:email,password:password}});},register:function register(username,email,password){return requests.post('/users',{user:{username:username,email:email,password:password}});},save:function save(user){return requests.put('/user',{user:user});}};var Tags={getAll:function getAll(){return requests.get('/tags');}};var limit=function limit(count,p){return\"limit=\".concat(count,\"&offset=\").concat(p?p*count:0);};var omitSlug=function omitSlug(article){return Object.assign({},article,{slug:undefined});};var Articles={all:function all(page){return requests.get(\"/articles?\".concat(limit(10,page)));},byAuthor:function byAuthor(author,page){return requests.get(\"/articles?author=\".concat(encode(author),\"&\").concat(limit(5,page)));},byTag:function byTag(tag,page){return requests.get(\"/articles?tag=\".concat(encode(tag),\"&\").concat(limit(10,page)));},del:function del(slug){return requests.del(\"/articles/\".concat(slug));},favorite:function favorite(slug){return requests.post(\"/articles/\".concat(slug,\"/favorite\"));},favoritedBy:function favoritedBy(author,page){return requests.get(\"/articles?favorited=\".concat(encode(author),\"&\").concat(limit(5,page)));},feed:function feed(){return requests.get('/articles/feed?limit=10&offset=0');},get:function get(slug){return requests.get(\"/articles/\".concat(slug));},unfavorite:function unfavorite(slug){return requests.del(\"/articles/\".concat(slug,\"/favorite\"));},update:function update(article){return requests.put(\"/articles/\".concat(article.slug),{article:omitSlug(article)});},create:function create(article){return requests.post('/articles',{article:article});}};var Comments={create:function create(slug,comment){return requests.post(\"/articles/\".concat(slug,\"/comments\"),{comment:comment});},delete:function _delete(slug,commentId){return requests.del(\"/articles/\".concat(slug,\"/comments/\").concat(commentId));},forArticle:function forArticle(slug){return requests.get(\"/articles/\".concat(slug,\"/comments\"));}};var Profile={follow:function follow(username){return requests.post(\"/profiles/\".concat(username,\"/follow\"));},get:function get(username){return requests.get(\"/profiles/\".concat(username));},unfollow:function unfollow(username){return requests.del(\"/profiles/\".concat(username,\"/follow\"));}};export default{Articles:Articles,Auth:Auth,Comments:Comments,Profile:Profile,Tags:Tags,setToken:function setToken(_token){token=_token;}};","map":{"version":3,"sources":["/storage/emulated/0/ASTRO/projects/react_2/src/agent.js"],"names":["superagentPromise","_superagent","superagent","global","Promise","API_ROOT","encode","encodeURIComponent","responseBody","res","body","token","tokenPlugin","req","set","requests","del","url","use","then","get","put","post","Auth","current","login","email","password","user","register","username","save","Tags","getAll","limit","count","p","omitSlug","article","Object","assign","slug","undefined","Articles","all","page","byAuthor","author","byTag","tag","favorite","favoritedBy","feed","unfavorite","update","create","Comments","comment","delete","commentId","forArticle","Profile","follow","unfollow","setToken","_token"],"mappings":"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","sourcesContent":["import superagentPromise from 'superagent-promise';\nimport _superagent from 'superagent';\n\nconst superagent = superagentPromise(_superagent, global.Promise);\n\nconst API_ROOT = 'https://conduit.productionready.io/api';\n\nconst encode = encodeURIComponent;\nconst responseBody = res => res.body;\n\nlet token = null;\nconst tokenPlugin = req => {\n  if (token) {\n    req.set('authorization', `Token ${token}`);\n  }\n}\n\nconst requests = {\n  del: url =>\n    superagent.del(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\n  get: url =>\n    superagent.get(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\n  put: (url, body) =>\n    superagent.put(`${API_ROOT}${url}`, body).use(tokenPlugin).then(responseBody),\n  post: (url, body) =>\n    superagent.post(`${API_ROOT}${url}`, body).use(tokenPlugin).then(responseBody)\n};\n\nconst Auth = {\n  current: () =>\n    requests.get('/user'),\n  login: (email, password) =>\n    requests.post('/users/login', { user: { email, password } }),\n  register: (username, email, password) =>\n    requests.post('/users', { user: { username, email, password } }),\n  save: user =>\n    requests.put('/user', { user })\n};\n\nconst Tags = {\n  getAll: () => requests.get('/tags')\n};\n\nconst limit = (count, p) => `limit=${count}&offset=${p ? p * count : 0}`;\nconst omitSlug = article => Object.assign({}, article, { slug: undefined })\nconst Articles = {\n  all: page =>\n    requests.get(`/articles?${limit(10, page)}`),\n  byAuthor: (author, page) =>\n    requests.get(`/articles?author=${encode(author)}&${limit(5, page)}`),\n  byTag: (tag, page) =>\n    requests.get(`/articles?tag=${encode(tag)}&${limit(10, page)}`),\n  del: slug =>\n    requests.del(`/articles/${slug}`),\n  favorite: slug =>\n    requests.post(`/articles/${slug}/favorite`),\n  favoritedBy: (author, page) =>\n    requests.get(`/articles?favorited=${encode(author)}&${limit(5, page)}`),\n  feed: () =>\n    requests.get('/articles/feed?limit=10&offset=0'),\n  get: slug =>\n    requests.get(`/articles/${slug}`),\n  unfavorite: slug =>\n    requests.del(`/articles/${slug}/favorite`),\n  update: article =>\n    requests.put(`/articles/${article.slug}`, { article: omitSlug(article) }),\n  create: article =>\n    requests.post('/articles', { article })\n};\n\nconst Comments = {\n  create: (slug, comment) =>\n    requests.post(`/articles/${slug}/comments`, { comment }),\n  delete: (slug, commentId) =>\n    requests.del(`/articles/${slug}/comments/${commentId}`),\n  forArticle: slug =>\n    requests.get(`/articles/${slug}/comments`)\n};\n\nconst Profile = {\n  follow: username =>\n    requests.post(`/profiles/${username}/follow`),\n  get: username =>\n    requests.get(`/profiles/${username}`),\n  unfollow: username =>\n    requests.del(`/profiles/${username}/follow`)\n};\n\nexport default {\n  Articles,\n  Auth,\n  Comments,\n  Profile,\n  Tags,\n  setToken: _token => { token = _token; }\n};\n"]},"metadata":{},"sourceType":"module"}