{"version":3,"sources":["webpack://ReduxRequests/webpack/universalModuleDefinition","webpack://ReduxRequests/../node_modules/@babel/runtime/helpers/extends.js","webpack://ReduxRequests/./src/actions.js","webpack://ReduxRequests/./src/constants.js","webpack://ReduxRequests/./src/default-config.js","webpack://ReduxRequests/./src/handle-requests.js","webpack://ReduxRequests/./src/index.js","webpack://ReduxRequests/./src/middleware/create-client-ssr-middleware.js","webpack://ReduxRequests/./src/middleware/create-requests-cache-middleware.js","webpack://ReduxRequests/./src/middleware/create-requests-store.js","webpack://ReduxRequests/./src/middleware/create-send-requests-middleware.js","webpack://ReduxRequests/./src/middleware/create-server-ssr-middleware.js","webpack://ReduxRequests/./src/normalizers/denormalize.js","webpack://ReduxRequests/./src/normalizers/get-dependent-keys.js","webpack://ReduxRequests/./src/normalizers/merge-data.js","webpack://ReduxRequests/./src/normalizers/normalize.js","webpack://ReduxRequests/./src/reducers/cache-reducer.js","webpack://ReduxRequests/./src/reducers/mutations-reducer.js","webpack://ReduxRequests/./src/reducers/progress-reducer.js","webpack://ReduxRequests/./src/reducers/queries-reducer.js","webpack://ReduxRequests/./src/reducers/requests-keys-reducer.js","webpack://ReduxRequests/./src/reducers/requests-reducer.js","webpack://ReduxRequests/./src/reducers/requests-reset-reducer.js","webpack://ReduxRequests/./src/reducers/ssr-reducer.js","webpack://ReduxRequests/./src/reducers/update-data.js","webpack://ReduxRequests/./src/selectors/get-mutation-selector.js","webpack://ReduxRequests/./src/selectors/get-mutation.js","webpack://ReduxRequests/./src/selectors/get-query-selector.js","webpack://ReduxRequests/./src/selectors/get-query.js","webpack://ReduxRequests/../node_modules/deepmerge/dist/cjs.js","webpack://ReduxRequests/external {\"commonjs\":\"reselect\",\"commonjs2\":\"reselect\",\"amd\":\"reselect\",\"root\":\"Reselect\"}","webpack://ReduxRequests/webpack/bootstrap","webpack://ReduxRequests/webpack/runtime/compat get default export","webpack://ReduxRequests/webpack/runtime/define property getters","webpack://ReduxRequests/webpack/runtime/hasOwnProperty shorthand","webpack://ReduxRequests/webpack/runtime/make namespace object","webpack://ReduxRequests/webpack/startup"],"names":["getActionWithSuffix","suffix","actionType","success","SUCCESS_SUFFIX","error","ERROR_SUFFIX","abort","ABORT_SUFFIX","isFSA","action","payload","createSuccessAction","response","type","meta","requestAction","createErrorAction","errorData","createAbortAction","getActionPayload","undefined","getResponseFromSuccessAction","isRequestAction","actionPayload","request","Array","isArray","url","query","promise","Error","isResponseAction","getRequestActionFromResponse","isSuccessAction","endsWith","isErrorAction","isAbortAction","isRequestQuery","method","toLowerCase","trim","startsWith","isRequestActionQuery","asMutation","every","clearRequestsCache","requests","CLEAR_REQUESTS_CACHE","resetRequests","abortPending","RESET_REQUESTS","abortRequests","ABORT_REQUESTS","setDownloadProgress","requestType","progress","SET_DOWNLOAD_PROGRESS","setUploadProgress","SET_UPLOAD_PROGRESS","driver","onRequest","onSuccess","onError","onAbort","cache","ssr","takeLatest","normalize","getNormalisationObjectKey","obj","id","shouldObjectBeNormalized","defer","res","rej","Promise","resolve","reject","handleRequests","userConfig","config","defaultConfig","requestsPromise","requestsReducer","requestsMiddleware","createServerSsrMiddleware","createClientSsrMiddleware","createRequestsCacheMiddleware","createSendRequestsMiddleware","filter","Boolean","store","next","state","getState","actionsToIgnore","findIndex","v","getQuery","requestKey","ssrError","ssrResponse","data","isCacheValid","cacheKey","timeout","Date","now","getKey","key","cacheValue","cacheResponse","dispatchRequest","dispatch","getRequestTypeString","toString","getKeys","map","getDriver","getLastActionKey","isActionRehydrated","abortPendingRequests","pendingRequests","clearAll","keys","Object","values","forEach","r","cancel","entries","k","includes","isTakeLatest","maybeCallOnRequestInterceptor","runOnRequest","maybeCallOnRequestMeta","maybeDispatchRequestAction","silent","getDriverActions","driverActions","measureDownloadProgress","measureUploadProgress","getResponsePromises","isBatchedRequest","lastActionKey","responsePromises","maybeCallGetError","getError","maybeCallOnErrorInterceptor","runOnError","all","maybeCallOnErrorMeta","maybeCallOnAbortInterceptor","runOnAbort","maybeCallOnAbortMeta","getInitialBatchObject","responseKeys","reduce","prev","maybeTransformBatchRequestResponse","current","push","maybeCallGetData","getData","maybeCallOnSuccessInterceptor","runOnSuccess","result","maybeCallOnSuccessMeta","createSendRequestMiddleware","requestsStore","createRequestsStore","abortAction","isAborted","errorAction","then","successAction","index","successActions","errorActions","dependentRequestsNumber","isDependentRequest","length","denormalize","normalizedData","usedKeys","path","objectEntries","getDependentKeys","dependentKeys","Set","add","mergeOptions","arrayMerge","destinationArray","sourceArray","clone","mergeData","oldData","newData","deepmerge","stipFromDeps","root","getDependencies","dependencies","getNewCacheTimeout","getRequestKey","getRequestKeys","mutationType","pending","ref","downloadProgress","uploadProgress","getInitialQuery","normalized","pristine","getDataFromResponseAction","shouldBeNormalized","queryReducer","mutations","mutationConfig","updateData","queries","maybeGetQueryActionType","updateNormalizedData","optimisticData","newNormalizedData","revertedData","localData","updatedQuery","newdata","queryActionType","queryType","requestsKeys","requestsCapacity","isQuery","requestsStorage","numberOfExceedingRequests","exceedingRequestsKeys","slice","exceededRequest","copiedStorage","copiedCache","defaultState","queriesReducer","mutationsReducer","requestKeysReducer","requestsResetReducer","cacheReducer","progressReducer","ssrReducer","resetQuery","resetMutation","mutation","indexToRemove","_","i","getDataUpdater","dataUpdater","revertData","updateDataOptimistic","local","props","getMutation","defaultMutation","loading","getMutationState","mutationSelectors","WeakMap","createMutationSelector","createSelector","mutationState","get","set","isQueryEqual","currentVal","previousVal","multiple","defaultData","currentDependencies","previousDependencies","size","has","createCustomSelector","createSelectorCreator","defaultMemoize","getQueryState","createQuerySelector","defaultQuery","defaultQueryMultiple","defaultQueriesWithCustomData","Map","getDefaultQuery","querySelectors","queryState"],"mappings":"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CAAmBqB,UAAU,CAACpF,GAA9B,EAAmC6E,mBAAmB,CAAClR,IAAD,EAAOsF,UAAP,CAAtD;AACD;;AAED,SAAOkM,cAAc,CAACrB,GAAf,CAAmBsB,UAAU,CAACpF,GAA9B,EAAmCrH,KAAnC,EAA0CyL,WAA1C,EAAuDD,QAAvD,CAAP;AACD,CAZD,E;;;;;;;;;;;;;;AC5Ka;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,IAAI;AACN;;AAEA;;AAEA;;;;;;;;;;;;;;;;ACpIA,sD;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA;WACA,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"redux-requests.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"reselect\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"reselect\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxRequests\"] = factory(require(\"reselect\"));\n\telse\n\t\troot[\"ReduxRequests\"] = factory(root[\"Reselect\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE_reselect__) {\nreturn ","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","import {\n  SUCCESS_SUFFIX,\n  ERROR_SUFFIX,\n  ABORT_SUFFIX,\n  CLEAR_REQUESTS_CACHE,\n  RESET_REQUESTS,\n  ABORT_REQUESTS,\n  SET_DOWNLOAD_PROGRESS,\n  SET_UPLOAD_PROGRESS,\n} from './constants';\n\nconst getActionWithSuffix = suffix => actionType => actionType + suffix;\n\nexport const success = getActionWithSuffix(SUCCESS_SUFFIX);\n\nexport const error = getActionWithSuffix(ERROR_SUFFIX);\n\nexport const abort = getActionWithSuffix(ABORT_SUFFIX);\n\nconst isFSA = action => !!action.payload;\n\nexport const createSuccessAction = (action, response) => ({\n  type: success(action.type),\n  ...(isFSA(action) ? { payload: response } : { response }),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const createErrorAction = (action, errorData) => ({\n  type: error(action.type),\n  ...(isFSA(action)\n    ? {\n        payload: errorData,\n        error: true,\n      }\n    : {\n        error: errorData,\n      }),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const createAbortAction = action => ({\n  type: abort(action.type),\n  meta: {\n    ...action.meta,\n    requestAction: action,\n  },\n});\n\nexport const getActionPayload = action =>\n  action.payload === undefined ? action : action.payload;\n\n// eslint-disable-next-line import/no-unused-modules\nexport const getResponseFromSuccessAction = action =>\n  action.payload ? action.payload : action.response;\n\nexport const isRequestAction = action => {\n  const actionPayload = getActionPayload(action);\n\n  return (\n    !!actionPayload?.request &&\n    !!(\n      Array.isArray(actionPayload.request) ||\n      actionPayload.request.url ||\n      actionPayload.request.query ||\n      actionPayload.request.promise ||\n      actionPayload.request.response ||\n      actionPayload.request.error\n    ) &&\n    !actionPayload.response &&\n    !(actionPayload instanceof Error)\n  );\n};\n\nexport const isResponseAction = action => !!action.meta?.requestAction;\n\nexport const getRequestActionFromResponse = action => action.meta.requestAction;\n\nexport const isSuccessAction = action =>\n  isResponseAction(action) && action.type.endsWith(SUCCESS_SUFFIX);\n\nexport const isErrorAction = action =>\n  isResponseAction(action) && action.type.endsWith(ERROR_SUFFIX);\n\nexport const isAbortAction = action =>\n  isResponseAction(action) && action.type.endsWith(ABORT_SUFFIX);\n\nconst isRequestQuery = request =>\n  (!request.query &&\n    (!request.method || request.method.toLowerCase() === 'get')) ||\n  (request.query && !request.query.trim().startsWith('mutation'));\n\nexport const isRequestActionQuery = action => {\n  const { request } = getActionPayload(action);\n\n  if (action.meta?.asMutation !== undefined) {\n    return !action.meta.asMutation;\n  }\n\n  return !!(Array.isArray(request)\n    ? request.every(isRequestQuery)\n    : isRequestQuery(request));\n};\n\nexport const clearRequestsCache = (requests = null) => ({\n  type: CLEAR_REQUESTS_CACHE,\n  requests,\n});\n\nexport const resetRequests = (requests = null, abortPending = true) => ({\n  type: RESET_REQUESTS,\n  requests,\n  abortPending,\n});\n\nexport const abortRequests = (requests = null) => ({\n  type: ABORT_REQUESTS,\n  requests,\n});\n\nexport const setDownloadProgress = (requestType, progress) => ({\n  type: SET_DOWNLOAD_PROGRESS,\n  requestType,\n  progress,\n});\n\nexport const setUploadProgress = (requestType, progress) => ({\n  type: SET_UPLOAD_PROGRESS,\n  requestType,\n  progress,\n});\n","export const SUCCESS_SUFFIX = '_SUCCESS';\nexport const ERROR_SUFFIX = '_ERROR';\nexport const ABORT_SUFFIX = '_ABORT';\nexport const CLEAR_REQUESTS_CACHE = 'CLEAR_REQUESTS_CACHE';\nexport const RESET_REQUESTS = 'RESET_REQUESTS';\nexport const ABORT_REQUESTS = 'ABORT_REQUESTS';\nexport const SET_DOWNLOAD_PROGRESS = 'SET_DOWNLOAD_PROGRESS';\nexport const SET_UPLOAD_PROGRESS = 'SET_UPLOAD_PROGRESS';\n","import { isRequestActionQuery, isRequestAction } from './actions';\n\nexport default {\n  driver: null,\n  onRequest: null,\n  onSuccess: null,\n  onError: null,\n  onAbort: null,\n  cache: false,\n  ssr: null,\n  isRequestAction,\n  isRequestActionQuery,\n  takeLatest: isRequestActionQuery,\n  normalize: false,\n  getNormalisationObjectKey: obj => obj.id,\n  shouldObjectBeNormalized: obj => obj.id !== undefined,\n};\n","import { requestsReducer } from './reducers';\nimport {\n  createRequestsCacheMiddleware,\n  createClientSsrMiddleware,\n  createServerSsrMiddleware,\n  createSendRequestsMiddleware,\n} from './middleware';\nimport defaultConfig from './default-config';\n\nconst defer = () => {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n};\n\nconst handleRequests = userConfig => {\n  const config = { ...defaultConfig, ...userConfig };\n  const requestsPromise = config.ssr === 'server' ? defer() : null;\n\n  return {\n    requestsReducer: requestsReducer(config),\n    requestsMiddleware: [\n      config.ssr === 'server' &&\n        createServerSsrMiddleware(requestsPromise, config),\n      config.ssr === 'client' && createClientSsrMiddleware(config),\n      config.cache && createRequestsCacheMiddleware(config),\n      createSendRequestsMiddleware(config),\n    ].filter(Boolean),\n    requestsPromise,\n  };\n};\n\nexport default handleRequests;\n","export {\n  success,\n  error,\n  abort,\n  clearRequestsCache,\n  resetRequests,\n  abortRequests,\n  isRequestActionQuery,\n  isRequestAction,\n  isResponseAction,\n} from './actions';\nexport { default as handleRequests } from './handle-requests';\nexport {\n  getQuery,\n  getMutation,\n  getQuerySelector,\n  getMutationSelector,\n} from './selectors';\nexport { createRequestsStore } from './middleware';\n","import defaultConfig from '../default-config';\nimport { getQuery } from '../selectors';\n\nexport default (config = defaultConfig) => store => next => action => {\n  if (!config.isRequestAction(action)) {\n    return next(action);\n  }\n\n  const state = store.getState();\n  const actionsToIgnore = state.requests.ssr;\n\n  if (actionsToIgnore.findIndex(v => v === action.type) === -1) {\n    return next(action);\n  }\n\n  const query = getQuery(state, {\n    type: action.type,\n    requestKey: action.meta?.requestKey,\n  });\n\n  if (query.error) {\n    return next({\n      ...action,\n      meta: {\n        ...action.meta,\n        ssrError: query.error,\n      },\n    });\n  }\n\n  return next({\n    ...action,\n    meta: {\n      ...action.meta,\n      ssrResponse: { data: query.data },\n    },\n  });\n};\n","import defaultConfig from '../default-config';\nimport { getQuery } from '../selectors';\n\nconst isCacheValid = (cache, action) =>\n  cache.cacheKey === action.meta.cacheKey &&\n  (cache.timeout === null || Date.now() <= cache.timeout);\n\nconst getKey = action => action.type + (action.meta.requestKey || '');\n\nexport default (config = defaultConfig) => store => next => action => {\n  if (\n    config.isRequestAction(action) &&\n    action.meta?.cache &&\n    !action.meta.ssrResponse\n  ) {\n    const key = getKey(action);\n    const state = store.getState();\n    const cacheValue = state.requests.cache[key];\n\n    if (cacheValue !== undefined && isCacheValid(cacheValue, action)) {\n      const query = getQuery(state, {\n        type: action.type,\n        requestKey: action.meta?.requestKey,\n      });\n\n      return next({\n        ...action,\n        meta: {\n          ...action.meta,\n          cacheResponse: { data: query.data },\n        },\n      });\n    }\n  }\n\n  return next(action);\n};\n","export default store => {\n  return {\n    ...store,\n    dispatchRequest: store.dispatch,\n  };\n};\n","import {\n  getActionPayload,\n  createSuccessAction,\n  createErrorAction,\n  createAbortAction,\n  setDownloadProgress,\n  setUploadProgress,\n} from '../actions';\nimport { ABORT_REQUESTS, RESET_REQUESTS } from '../constants';\nimport { getQuery } from '../selectors';\n\nimport createRequestsStore from './create-requests-store';\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + v.requestKey\n      : getRequestTypeString(v),\n  );\n\nconst getDriver = (config, action) =>\n  action.meta?.driver\n    ? config.driver[action.meta.driver]\n    : config.driver.default || config.driver;\n\nconst getLastActionKey = action =>\n  action.type + (action.meta?.requestKey ? action.meta.requestKey : '');\n\nconst isActionRehydrated = action =>\n  !!(\n    action.meta?.cacheResponse ||\n    action.meta?.ssrResponse ||\n    action.meta?.ssrError\n  );\n\n// TODO: remove to more functional style, we need object maps and filters\nconst abortPendingRequests = (action, pendingRequests) => {\n  const payload = getActionPayload(action);\n  const clearAll = !payload.requests;\n  const keys = !clearAll && getKeys(payload.requests);\n\n  if (!payload.requests) {\n    Object.values(pendingRequests).forEach(requests =>\n      requests.forEach(r => r.cancel()),\n    );\n  } else {\n    Object.entries(pendingRequests)\n      .filter(([k]) => keys.includes(k))\n      .forEach(([, requests]) => requests.forEach(r => r.cancel()));\n  }\n};\n\nconst isTakeLatest = (action, config) =>\n  action.meta?.takeLatest !== undefined\n    ? action.meta.takeLatest\n    : typeof config.takeLatest === 'function'\n    ? config.takeLatest(action)\n    : config.takeLatest;\n\nconst maybeCallOnRequestInterceptor = (action, config, store) => {\n  const payload = getActionPayload(action);\n\n  if (\n    config.onRequest &&\n    (!action.meta || action.meta.runOnRequest !== false)\n  ) {\n    if (action.request) {\n      return {\n        ...action,\n        request: config.onRequest(payload.request, action, store),\n      };\n    }\n\n    return {\n      ...action,\n      payload: {\n        ...action.payload,\n        request: config.onRequest(payload.request, action, store),\n      },\n    };\n  }\n\n  return action;\n};\n\nconst maybeCallOnRequestMeta = (action, store) => {\n  const payload = getActionPayload(action);\n\n  if (action.meta?.onRequest) {\n    if (action.request) {\n      return {\n        ...action,\n        request: action.meta.onRequest(payload.request, action, store),\n      };\n    }\n\n    return {\n      ...action,\n      payload: {\n        ...action.payload,\n        request: action.meta.onRequest(payload.request, action, store),\n      },\n    };\n  }\n\n  return action;\n};\n\nconst maybeDispatchRequestAction = (action, next) => {\n  if (!action.meta || !action.meta.silent) {\n    action = next(action);\n  }\n\n  return action;\n};\n\nconst getDriverActions = (action, store) => {\n  const driverActions = {};\n\n  if (action.meta?.measureDownloadProgress) {\n    driverActions.setDownloadProgress = progress =>\n      store.dispatch(\n        setDownloadProgress(\n          action.type + (action.meta?.requestKey || ''),\n          progress,\n        ),\n      );\n  }\n\n  if (action.meta?.measureUploadProgress) {\n    driverActions.setUploadProgress = progress =>\n      store.dispatch(\n        setUploadProgress(\n          action.type + (action.meta?.requestKey || ''),\n          progress,\n        ),\n      );\n  }\n\n  return driverActions;\n};\n\nconst getResponsePromises = (action, config, pendingRequests, store) => {\n  const actionPayload = getActionPayload(action);\n  const isBatchedRequest = Array.isArray(actionPayload.request);\n\n  if (action.meta?.cacheResponse) {\n    return [Promise.resolve(action.meta.cacheResponse)];\n  } else if (action.meta?.ssrResponse) {\n    return [Promise.resolve(action.meta.ssrResponse)];\n  } else if (action.meta?.ssrError) {\n    return [Promise.reject(action.meta.ssrError)];\n  }\n\n  const driverActions = isBatchedRequest ? {} : getDriverActions(action, store);\n  const driver = getDriver(config, action);\n  const lastActionKey = getLastActionKey(action);\n  const takeLatest = isTakeLatest(action, config);\n\n  if (takeLatest && pendingRequests[lastActionKey]) {\n    pendingRequests[lastActionKey].forEach(r => r.cancel());\n  }\n\n  const responsePromises = isBatchedRequest\n    ? actionPayload.request.map(r => driver(r, action, driverActions))\n    : [driver(actionPayload.request, action, driverActions)];\n\n  if (responsePromises[0].cancel) {\n    pendingRequests[lastActionKey] = responsePromises;\n  }\n\n  return responsePromises;\n};\n\nconst maybeCallGetError = (action, error) => {\n  if (\n    error !== 'REQUEST_ABORTED' &&\n    !isActionRehydrated(action) &&\n    action.meta?.getError\n  ) {\n    throw action.meta.getError(error);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnErrorInterceptor = (action, config, store, error) => {\n  if (\n    error !== 'REQUEST_ABORTED' &&\n    config.onError &&\n    (!action.meta || action.meta.runOnError !== false)\n  ) {\n    return Promise.all([config.onError(error, action, store)]);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnErrorMeta = (action, store, error) => {\n  if (error !== 'REQUEST_ABORTED' && action.meta?.onError) {\n    return Promise.all([action.meta.onError(error, action, store)]);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnAbortInterceptor = (action, config, store, error) => {\n  if (\n    error === 'REQUEST_ABORTED' &&\n    config.onAbort &&\n    (!action.meta || action.meta.runOnAbort !== false)\n  ) {\n    config.onAbort(action, store);\n  }\n\n  throw error;\n};\n\nconst maybeCallOnAbortMeta = (action, store, error) => {\n  if (error === 'REQUEST_ABORTED' && action.meta?.onAbort) {\n    action.meta.onAbort(action, store);\n  }\n\n  throw error;\n};\n\nconst getInitialBatchObject = responseKeys =>\n  responseKeys.reduce((prev, key) => {\n    prev[key] = [];\n    return prev;\n  }, {});\n\nconst maybeTransformBatchRequestResponse = (action, response) => {\n  const actionPayload = getActionPayload(action);\n  const isBatchedRequest = Array.isArray(actionPayload.request);\n  const responseKeys = Object.keys(response[0]);\n\n  return isBatchedRequest && !isActionRehydrated(action)\n    ? response.reduce((prev, current) => {\n        responseKeys.forEach(key => {\n          prev[key].push(current[key]);\n        });\n        return prev;\n      }, getInitialBatchObject(responseKeys))\n    : response[0];\n};\n\nconst maybeCallGetData = (action, store, response) => {\n  if (!isActionRehydrated(action) && action.meta?.getData) {\n    const query = getQuery(store.getState(), {\n      type: action.type,\n      requestKey: action.meta?.requestKey,\n    });\n\n    return {\n      ...response,\n      data: action.meta.getData(response.data, query.data),\n    };\n  }\n\n  return response;\n};\n\nconst maybeCallOnSuccessInterceptor = (action, config, store, response) => {\n  if (\n    config.onSuccess &&\n    (!action.meta || action.meta.runOnSuccess !== false)\n  ) {\n    const result = config.onSuccess(response, action, store);\n\n    if (!isActionRehydrated(action)) {\n      return result;\n    }\n  }\n\n  return response;\n};\n\nconst maybeCallOnSuccessMeta = (action, store, response) => {\n  if (action.meta?.onSuccess) {\n    const result = action.meta.onSuccess(response, action, store);\n\n    if (!isActionRehydrated(action)) {\n      return result;\n    }\n  }\n\n  return response;\n};\n\nconst createSendRequestMiddleware = config => {\n  // TODO: clear not pending promises sometimes\n  const pendingRequests = {};\n\n  return store => next => action => {\n    const payload = getActionPayload(action);\n    const requestsStore = createRequestsStore(store);\n\n    if (\n      action.type === ABORT_REQUESTS ||\n      (action.type === RESET_REQUESTS && payload.abortPending)\n    ) {\n      abortPendingRequests(action, pendingRequests);\n      return next(action);\n    }\n\n    if (config.isRequestAction(action)) {\n      action = maybeCallOnRequestInterceptor(action, config, requestsStore);\n      action = maybeCallOnRequestMeta(action, requestsStore);\n      action = maybeDispatchRequestAction(action, next);\n\n      const responsePromises = getResponsePromises(\n        action,\n        config,\n        pendingRequests,\n        store,\n      );\n\n      return Promise.all(responsePromises)\n        .catch(error => maybeCallGetError(action, error))\n        .catch(error =>\n          maybeCallOnErrorInterceptor(action, config, requestsStore, error),\n        )\n        .catch(error => maybeCallOnErrorMeta(action, requestsStore, error))\n        .catch(error =>\n          maybeCallOnAbortInterceptor(action, config, requestsStore, error),\n        )\n        .catch(error => maybeCallOnAbortMeta(action, requestsStore, error))\n        .catch(error => {\n          if (error === 'REQUEST_ABORTED') {\n            const abortAction = createAbortAction(action);\n\n            if (!action.meta || !action.meta.silent) {\n              store.dispatch(abortAction);\n            }\n\n            throw { action: abortAction, isAborted: true };\n          }\n\n          const errorAction = createErrorAction(action, error);\n\n          if (!action.meta || !action.meta.silent) {\n            store.dispatch(errorAction);\n          }\n\n          throw { action: errorAction, error };\n        })\n        .then(response => {\n          response = maybeTransformBatchRequestResponse(action, response);\n          return maybeCallGetData(action, store, response);\n        })\n        .then(response =>\n          maybeCallOnSuccessInterceptor(\n            action,\n            config,\n            requestsStore,\n            response,\n          ),\n        )\n        .then(response =>\n          maybeCallOnSuccessMeta(action, requestsStore, response),\n        )\n        .then(response => {\n          const successAction = createSuccessAction(action, response);\n\n          if (!action.meta || !action.meta.silent) {\n            store.dispatch(successAction);\n          }\n\n          return { action: successAction, ...response };\n        })\n        .catch(error => {\n          if (error && error.action) {\n            return error;\n          }\n\n          throw error;\n        });\n    }\n\n    return next(action);\n  };\n};\n\nexport default createSendRequestMiddleware;\n","import defaultConfig from '../default-config';\nimport { isResponseAction, isSuccessAction } from '../actions';\n\nexport default (requestsPromise, config = defaultConfig) => {\n  let index = 0;\n  const successActions = [];\n  const errorActions = [];\n\n  return () => next => action => {\n    if (config.isRequestAction(action)) {\n      index +=\n        action.meta?.dependentRequestsNumber !== undefined\n          ? action.meta.dependentRequestsNumber + 1\n          : 1;\n    } else if (isResponseAction(action)) {\n      action = next(action);\n\n      if (!isSuccessAction(action)) {\n        errorActions.push(action);\n        index -=\n          action.meta.dependentRequestsNumber !== undefined\n            ? action.meta.dependentRequestsNumber + 1\n            : 1;\n        index -= action.meta.isDependentRequest ? 1 : 0;\n      } else {\n        successActions.push(action);\n        index -= action.meta.isDependentRequest ? 2 : 1;\n      }\n\n      if (index === 0) {\n        if (errorActions.length > 0) {\n          requestsPromise.reject({ successActions, errorActions });\n        } else {\n          requestsPromise.resolve(successActions);\n        }\n      }\n\n      return action;\n    }\n\n    return next(action);\n  };\n};\n","export const denormalize = (data, normalizedData, usedKeys, path = '') => {\n  if (typeof data === 'string' && data.startsWith('@@')) {\n    return denormalize(normalizedData[data], normalizedData, usedKeys, path);\n  }\n\n  if (Array.isArray(data)) {\n    return data.map(v => denormalize(v, normalizedData, usedKeys, path));\n  }\n\n  if (data !== null && typeof data === 'object') {\n    const objectEntries = usedKeys[path]\n      ? Object.entries(data).filter(([k]) => usedKeys[path].includes(k))\n      : Object.entries(data);\n\n    return objectEntries.reduce((prev, [k, v]) => {\n      prev[k] = denormalize(v, normalizedData, usedKeys, `${path}.${k}`);\n      return prev;\n    }, {});\n  }\n\n  return data;\n};\n","export const getDependentKeys = (\n  data,\n  normalizedData,\n  usedKeys,\n  dependentKeys,\n  path = '',\n) => {\n  if (!dependentKeys) {\n    dependentKeys = new Set();\n  }\n\n  if (typeof data === 'string' && data.startsWith('@@')) {\n    dependentKeys.add(data);\n    getDependentKeys(\n      normalizedData[data],\n      normalizedData,\n      usedKeys,\n      dependentKeys,\n      path,\n    );\n  } else if (Array.isArray(data)) {\n    data.forEach(v =>\n      getDependentKeys(v, normalizedData, usedKeys, dependentKeys, path),\n    );\n  } else if (data !== null && typeof data === 'object') {\n    const objectEntries = usedKeys[path]\n      ? Object.entries(data).filter(([k]) => usedKeys[path].includes(k))\n      : Object.entries(data);\n\n    objectEntries.forEach(([k, v]) => {\n      getDependentKeys(\n        v,\n        normalizedData,\n        usedKeys,\n        dependentKeys,\n        `${path}.${k}`,\n      );\n    });\n  }\n\n  return dependentKeys;\n};\n","import deepmerge from 'deepmerge';\n\nconst mergeOptions = {\n  arrayMerge: (destinationArray, sourceArray) => sourceArray,\n  clone: false,\n};\n\nexport const mergeData = (oldData, newData) =>\n  deepmerge(oldData, newData, mergeOptions);\n","import defaultConfig from '../default-config';\n\nimport { mergeData } from './merge-data';\n\nconst stipFromDeps = (data, config, root = true) => {\n  if (Array.isArray(data)) {\n    return data.map(v => stipFromDeps(v, config));\n  }\n\n  if (data !== null && typeof data === 'object') {\n    if (config.shouldObjectBeNormalized(data) && root) {\n      return `@@${config.getNormalisationObjectKey(data)}`;\n    }\n\n    return Object.entries(data).reduce((prev, [k, v]) => {\n      prev[k] = stipFromDeps(v, config);\n      return prev;\n    }, {});\n  }\n\n  return data;\n};\n\nexport const getDependencies = (\n  data,\n  config = defaultConfig,\n  usedKeys,\n  path = '',\n) => {\n  usedKeys = usedKeys || {};\n\n  if (Array.isArray(data)) {\n    return [\n      data.reduce(\n        (prev, current) => [\n          ...prev,\n          ...getDependencies(current, config, usedKeys, path)[0],\n        ],\n        [],\n      ),\n      usedKeys,\n    ];\n  }\n\n  if (data !== null && typeof data === 'object') {\n    if (config.shouldObjectBeNormalized(data)) {\n      usedKeys[path] = Object.keys(data);\n    }\n\n    return [\n      Object.entries(data).reduce(\n        (prev, [k, v]) => [\n          ...prev,\n          ...getDependencies(v, config, usedKeys, `${path}.${k}`)[0],\n        ],\n        config.shouldObjectBeNormalized(data) ? [data] : [],\n      ),\n      usedKeys,\n    ];\n  }\n\n  return [[], usedKeys];\n};\n\nexport const normalize = (data, config = defaultConfig) => {\n  const [dependencies, usedKeys] = getDependencies(data, config);\n\n  return [\n    stipFromDeps(data, config, true),\n    dependencies.reduce((prev, v) => {\n      const key = config.getNormalisationObjectKey(v);\n      prev[`@@${key}`] = prev[`@@${key}`]\n        ? mergeData(prev[`@@${key}`], stipFromDeps(v, config, false))\n        : stipFromDeps(v, config, false);\n      return prev;\n    }, {}),\n    usedKeys,\n  ];\n};\n","import { CLEAR_REQUESTS_CACHE } from '../constants';\nimport { isSuccessAction, getRequestActionFromResponse } from '../actions';\n\nconst getNewCacheTimeout = cache =>\n  cache === true ? null : cache * 1000 + Date.now();\n\nconst getRequestKey = action => action.type + (action.meta.requestKey || '');\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getRequestKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + v.requestKey\n      : getRequestTypeString(v),\n  );\n\nexport default (state, action) => {\n  if (action.type === CLEAR_REQUESTS_CACHE) {\n    if (!action.requests) {\n      return {};\n    }\n\n    state = { ...state };\n    getRequestKeys(action.requests).forEach(requestKey => {\n      delete state[requestKey];\n    });\n\n    return state;\n  }\n\n  if (\n    isSuccessAction(action) &&\n    action.meta.cache &&\n    !action.meta.cacheResponse &&\n    !action.meta.ssrResponse\n  ) {\n    const requestAction = getRequestActionFromResponse(action);\n\n    return {\n      ...state,\n      [getRequestKey(requestAction)]: {\n        timeout: getNewCacheTimeout(action.meta.cache),\n        cacheKey: action.meta.cacheKey,\n      },\n    };\n  }\n\n  return state;\n};\n","import {\n  isErrorAction,\n  isResponseAction,\n  getRequestActionFromResponse,\n} from '../actions';\n\nexport default (state, action) => {\n  if (!isResponseAction(action)) {\n    const mutationType =\n      action.type + (action.meta?.requestKey ? action.meta.requestKey : '');\n\n    return {\n      ...state,\n      [mutationType]: {\n        error: null,\n        pending: (state[mutationType] ? state[mutationType].pending : 0) + 1,\n        ref: state[mutationType] ? state[mutationType].ref : {},\n      },\n    };\n  }\n\n  const requestAction = getRequestActionFromResponse(action);\n  const mutationType =\n    requestAction.type +\n    (action.meta?.requestKey ? action.meta.requestKey : '');\n\n  if (isErrorAction(action)) {\n    return {\n      ...state,\n      [mutationType]: {\n        error: action.payload ? action.payload : action.error,\n        pending: state[mutationType].pending - 1,\n        ref: state[mutationType].ref,\n      },\n    };\n  }\n\n  // success or abort case\n  return {\n    ...state,\n    [mutationType]: {\n      error: null,\n      pending: state[mutationType].pending - 1,\n      ref: state[mutationType].ref,\n    },\n  };\n};\n","import { SET_DOWNLOAD_PROGRESS, SET_UPLOAD_PROGRESS } from '../constants';\n\nexport default (state, action, config) => {\n  if (action.type === SET_DOWNLOAD_PROGRESS) {\n    return {\n      ...state,\n      downloadProgress: {\n        ...state.downloadProgress,\n        [action.requestType]: action.progress,\n      },\n    };\n  }\n\n  if (action.type === SET_UPLOAD_PROGRESS) {\n    return {\n      ...state,\n      uploadProgress: {\n        ...state.uploadProgress,\n        [action.requestType]: action.progress,\n      },\n    };\n  }\n\n  if (config.isRequestAction(action) && action.meta?.measureDownloadProgress) {\n    return {\n      ...state,\n      downloadProgress: {\n        ...state.downloadProgress,\n        [action.type + (action.meta?.requestKey || '')]: 0,\n      },\n    };\n  }\n\n  if (config.isRequestAction(action) && action.meta?.measureUploadProgress) {\n    return {\n      ...state,\n      uploadProgress: {\n        ...state.uploadProgress,\n        [action.type + (action.meta?.requestKey || '')]: 0,\n      },\n    };\n  }\n\n  return state;\n};\n","import defaultConfig from '../default-config';\nimport {\n  success,\n  error,\n  abort,\n  isResponseAction,\n  getRequestActionFromResponse,\n  isErrorAction,\n  isSuccessAction,\n} from '../actions';\nimport { getQuery } from '../selectors';\nimport { normalize, mergeData } from '../normalizers';\n\nimport updateData from './update-data';\n\nconst getInitialQuery = normalized => ({\n  data: null,\n  pending: 0,\n  error: null,\n  pristine: true,\n  ref: {},\n  normalized,\n  usedKeys: normalized ? {} : null,\n});\n\nconst getDataFromResponseAction = action =>\n  action.payload ? action.payload.data : action.response.data;\n\nconst shouldBeNormalized = (action, config) =>\n  action.meta?.normalize !== undefined\n    ? action.meta.normalize\n    : config.normalize;\n\nconst queryReducer = (state, action, actionType, config, normalizedData) => {\n  if (state === undefined) {\n    state = getInitialQuery(shouldBeNormalized(action, config));\n  }\n\n  if (action.meta?.mutations?.[actionType]) {\n    const mutationConfig = action.meta.mutations[actionType];\n    const data = updateData(\n      state.normalized\n        ? getQuery(\n            {\n              requests: {\n                normalizedData,\n                queries: { [actionType]: state },\n                downloadProgress: {},\n                uploadProgress: {},\n              },\n            },\n            { type: actionType },\n          ).data\n        : state.data,\n      action,\n      mutationConfig,\n    );\n    return data === state.data ? state : { ...state, data };\n  }\n\n  switch (action.type) {\n    case success(actionType):\n      return action.meta?.ssrResponse || action.meta?.cacheResponse\n        ? state\n        : {\n            ...state,\n            data: getDataFromResponseAction(action),\n            pending: state.pending - 1,\n            error: null,\n          };\n\n    case error(actionType):\n      return action.meta?.ssrError\n        ? state\n        : {\n            ...state,\n            data: null,\n            pending: state.pending - 1,\n            error: action.payload ? action.payload : action.error,\n          };\n    case abort(actionType):\n      return {\n        ...state,\n        pending: state.pending - 1,\n      };\n    default:\n      return action.meta?.ssrResponse ||\n        action.meta?.ssrError ||\n        action.meta?.cacheResponse\n        ? state\n        : {\n            ...state,\n            pending: state.pending + 1,\n            error: null,\n            pristine: false,\n          };\n  }\n};\n\nconst maybeGetQueryActionType = (action, config) => {\n  if (config.isRequestAction(action) && config.isRequestActionQuery(action)) {\n    return action.type;\n  }\n\n  if (\n    isResponseAction(action) &&\n    config.isRequestActionQuery(getRequestActionFromResponse(action))\n  ) {\n    return getRequestActionFromResponse(action).type;\n  }\n\n  return null;\n};\n\nconst updateNormalizedData = (normalizedData, action, config) => {\n  if (config.isRequestAction(action) && action.meta?.optimisticData) {\n    const [, newNormalizedData] = normalize(action.meta.optimisticData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (\n    isResponseAction(action) &&\n    isErrorAction(action) &&\n    action.meta.revertedData\n  ) {\n    const [, newNormalizedData] = normalize(action.meta.revertedData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (\n    isResponseAction(action) &&\n    isSuccessAction(action) &&\n    shouldBeNormalized(action, config) &&\n    !config.isRequestActionQuery(getRequestActionFromResponse(action))\n  ) {\n    const [, newNormalizedData] = normalize(\n      getDataFromResponseAction(action),\n      config,\n    );\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  if (action.meta?.localData) {\n    const [, newNormalizedData] = normalize(action.meta.localData, config);\n    return mergeData(normalizedData, newNormalizedData);\n  }\n\n  return normalizedData;\n};\n\nexport default (state, action, config = defaultConfig) => {\n  let normalizedData = updateNormalizedData(\n    state.normalizedData,\n    action,\n    config,\n  );\n\n  if (action.meta?.mutations) {\n    return {\n      queries: {\n        ...state.queries,\n        ...Object.keys(action.meta.mutations)\n          .filter(actionType => !!state.queries[actionType])\n          .reduce((prev, actionType) => {\n            const updatedQuery = queryReducer(\n              state.queries[actionType],\n              action,\n              actionType,\n              config,\n              normalizedData,\n            );\n\n            if (\n              updatedQuery.normalized &&\n              updatedQuery.data !== state.queries[actionType].data\n            ) {\n              const [newdata, newNormalizedData, usedKeys] = normalize(\n                updatedQuery.data,\n                config,\n              );\n              normalizedData = mergeData(normalizedData, newNormalizedData);\n              prev[actionType] = { ...updatedQuery, data: newdata, usedKeys };\n            } else {\n              prev[actionType] = updatedQuery;\n            }\n            return prev;\n          }, {}),\n      },\n      normalizedData,\n    };\n  }\n\n  const queryActionType = maybeGetQueryActionType(action, config);\n\n  if (queryActionType) {\n    const queryType =\n      action.meta?.requestKey !== undefined\n        ? queryActionType + action.meta.requestKey\n        : queryActionType;\n    const updatedQuery = queryReducer(\n      state.queries[queryType],\n      action,\n      queryActionType,\n      config,\n    );\n\n    if (\n      updatedQuery.normalized &&\n      updatedQuery.data &&\n      (!state.queries[queryType] ||\n        state.queries[queryType].data !== updatedQuery.data)\n    ) {\n      const [data, newNormalizedData, usedKeys] = normalize(\n        updatedQuery.data,\n        config,\n      );\n\n      return {\n        queries: {\n          ...state.queries,\n          [queryType]: { ...updatedQuery, data, usedKeys },\n        },\n        normalizedData: mergeData(normalizedData, newNormalizedData),\n      };\n    }\n\n    return {\n      queries: {\n        ...state.queries,\n        [queryType]: updatedQuery,\n      },\n      normalizedData,\n    };\n  }\n\n  return state.normalizedData === normalizedData\n    ? state\n    : {\n        ...state,\n        normalizedData,\n      };\n};\n","import defaultConfig from '../default-config';\n\n// TODO: this should be rewritten to more functional style, we need things like filter object helpers\nexport default (state, action, config = defaultConfig) => {\n  if (config.isRequestAction(action) && action.meta?.requestKey !== undefined) {\n    let { queries, mutations, cache, requestsKeys } = state;\n\n    if (!requestsKeys[action.type]) {\n      requestsKeys = {\n        ...requestsKeys,\n        [action.type]: [action.meta.requestKey],\n      };\n    } else {\n      requestsKeys = {\n        ...requestsKeys,\n        [action.type]: [\n          ...requestsKeys[action.type].filter(\n            k => k !== action.meta.requestKey,\n          ),\n          action.meta.requestKey,\n        ],\n      };\n    }\n\n    if (\n      action.meta.requestsCapacity &&\n      requestsKeys[action.type].length > action.meta.requestsCapacity\n    ) {\n      const isQuery = config.isRequestActionQuery(action);\n      const requestsStorage = isQuery ? queries : mutations;\n\n      const numberOfExceedingRequests =\n        requestsKeys[action.type].length - action.meta.requestsCapacity;\n\n      if (numberOfExceedingRequests > 0) {\n        const exceedingRequestsKeys = requestsKeys[action.type]\n          .slice(0, numberOfExceedingRequests)\n          .filter(k => {\n            const exceededRequest = requestsStorage[action.type + k];\n            return !exceededRequest || exceededRequest.pending === 0; // we dont want to remove pending requests\n          });\n\n        if (exceedingRequestsKeys.length > 0) {\n          requestsKeys = {\n            ...requestsKeys,\n            [action.type]: requestsKeys[action.type].filter(\n              k => !exceedingRequestsKeys.includes(k),\n            ),\n          };\n          const copiedStorage = { ...requestsStorage };\n\n          exceedingRequestsKeys.forEach(k => {\n            delete copiedStorage[action.type + k];\n          });\n\n          if (isQuery) {\n            queries = copiedStorage;\n\n            const copiedCache = { ...cache };\n\n            exceedingRequestsKeys.forEach(k => {\n              delete copiedCache[action.type + k];\n            });\n\n            cache = copiedCache;\n          } else {\n            mutations = copiedStorage;\n          }\n        }\n      }\n    }\n\n    return {\n      queries,\n      mutations,\n      cache,\n      requestsKeys,\n      downloadProgress: state.downloadProgress,\n      uploadProgress: state.uploadProgress,\n    };\n  }\n\n  return state;\n};\n","import defaultConfig from '../default-config';\nimport { isResponseAction, getRequestActionFromResponse } from '../actions';\n\nimport queriesReducer from './queries-reducer';\nimport mutationsReducer from './mutations-reducer';\nimport requestKeysReducer from './requests-keys-reducer';\nimport cacheReducer from './cache-reducer';\nimport progressReducer from './progress-reducer';\nimport requestsResetReducer from './requests-reset-reducer';\nimport ssrReducer from './ssr-reducer';\n\nconst defaultState = {\n  queries: {},\n  mutations: {},\n  normalizedData: {},\n  cache: {},\n  downloadProgress: {},\n  uploadProgress: {},\n  requestsKeys: {},\n};\n\nexport default (config = defaultConfig) => (state = defaultState, action) => {\n  const { queries, normalizedData } = queriesReducer(\n    { queries: state.queries, normalizedData: state.normalizedData },\n    action,\n    config,\n  );\n\n  let { mutations } = state;\n\n  if (\n    (config.isRequestAction(action) && !config.isRequestActionQuery(action)) ||\n    (isResponseAction(action) &&\n      !config.isRequestActionQuery(getRequestActionFromResponse(action)))\n  ) {\n    mutations = mutationsReducer(mutations, action);\n  }\n\n  return {\n    ...requestKeysReducer(\n      {\n        ...requestsResetReducer(\n          {\n            queries,\n            mutations,\n            cache: cacheReducer(state.cache, action),\n            ...progressReducer(\n              {\n                downloadProgress: state.downloadProgress,\n                uploadProgress: state.uploadProgress,\n              },\n              action,\n              config,\n            ),\n          },\n          action,\n        ),\n        requestsKeys: state.requestsKeys,\n      },\n      action,\n      config,\n    ),\n    normalizedData,\n    ssr: config.ssr ? ssrReducer(state.ssr, action, config) : null,\n  };\n};\n","import { RESET_REQUESTS } from '../constants';\n\nconst getRequestTypeString = requestType =>\n  typeof requestType === 'function' ? requestType.toString() : requestType;\n\nconst getKeys = requests =>\n  requests.map(v =>\n    typeof v === 'object'\n      ? getRequestTypeString(v.requestType) + v.requestKey\n      : getRequestTypeString(v),\n  );\n\nconst resetQuery = query => ({\n  ...query,\n  data: null,\n  error: null,\n  pristine: true,\n  usedKeys: query.normalized ? {} : null,\n});\n\nconst resetMutation = mutation => ({\n  ...mutation,\n  error: null,\n});\n\n// TODO: this should be rewritten to more functional style, we need things like filter/map object helpers\nexport default (state, action) => {\n  if (action.type !== RESET_REQUESTS) {\n    return state;\n  }\n\n  let { queries, mutations, cache, downloadProgress, uploadProgress } = state;\n  const clearAll = !action.requests;\n  const keys = !clearAll && getKeys(action.requests);\n\n  queries = Object.entries(queries).reduce((prev, [k, v]) => {\n    if (clearAll || keys.includes(k)) {\n      prev[k] = resetQuery(v);\n    } else {\n      prev[k] = v;\n    }\n    return prev;\n  }, {});\n\n  mutations = Object.entries(mutations).reduce((prev, [k, v]) => {\n    if (clearAll || keys.includes(k)) {\n      prev[k] = resetMutation(v);\n    } else {\n      prev[k] = v;\n    }\n    return prev;\n  }, {});\n\n  cache = clearAll\n    ? {}\n    : Object.entries(cache).reduce((prev, [k, v]) => {\n        if (keys.includes(k)) {\n          return prev;\n        }\n\n        prev[k] = v;\n\n        return prev;\n      }, {});\n\n  downloadProgress = clearAll\n    ? {}\n    : Object.entries(downloadProgress).reduce((prev, [k, v]) => {\n        if (keys.includes(k)) {\n          return prev;\n        }\n\n        prev[k] = v;\n\n        return prev;\n      }, {});\n\n  uploadProgress = clearAll\n    ? {}\n    : Object.entries(uploadProgress).reduce((prev, [k, v]) => {\n        if (keys.includes(k)) {\n          return prev;\n        }\n\n        prev[k] = v;\n\n        return prev;\n      }, {});\n\n  return { queries, mutations, cache, downloadProgress, uploadProgress };\n};\n","import defaultConfig from '../default-config';\nimport { getRequestActionFromResponse, isResponseAction } from '../actions';\n\nexport default (state = [], action, config = defaultConfig) => {\n  if (config.ssr === 'server' && isResponseAction(action)) {\n    return [...state, getRequestActionFromResponse(action).type];\n  }\n\n  if (\n    config.ssr === 'client' &&\n    config.isRequestAction(action) &&\n    (action.meta?.ssrResponse || action.meta?.ssrError)\n  ) {\n    const indexToRemove = state.findIndex(v => v === action.type);\n\n    if (indexToRemove >= 0) {\n      return state.filter((_, i) => i !== indexToRemove);\n    }\n  }\n\n  return state;\n};\n","import { isSuccessAction, isResponseAction } from '../actions';\n\nconst getDataUpdater = mutationConfig => {\n  if (typeof mutationConfig === 'function') {\n    return mutationConfig;\n  } else if (mutationConfig.updateData) {\n    return mutationConfig.updateData;\n  }\n\n  return null;\n};\n\nexport default (data, action, mutationConfig) => {\n  if (isResponseAction(action)) {\n    if (isSuccessAction(action)) {\n      const dataUpdater = getDataUpdater(mutationConfig);\n\n      return dataUpdater\n        ? dataUpdater(\n            data,\n            action.payload ? action.payload.data : action.response.data,\n          )\n        : data;\n    }\n\n    // error or abort case\n    return mutationConfig.revertData ? mutationConfig.revertData(data) : data;\n  }\n\n  if (mutationConfig.updateDataOptimistic) {\n    return mutationConfig.updateDataOptimistic(data);\n  }\n\n  if (mutationConfig.local) {\n    return getDataUpdater(mutationConfig)(data);\n  }\n\n  return data;\n};\n","import getMutation from './get-mutation';\n\nexport default props => state => getMutation(state, props);\n","import { createSelector } from 'reselect';\n\nconst defaultMutation = {\n  loading: false,\n  error: null,\n  downloadProgress: null,\n  uploadProgress: null,\n};\n\nconst getMutationState = (state, type, requestKey = '') =>\n  state.requests.mutations[type + requestKey];\n\nconst mutationSelectors = new WeakMap();\n\nconst createMutationSelector = (type, requestKey) =>\n  createSelector(\n    state => getMutationState(state, type, requestKey),\n    state => state.requests.downloadProgress[type + (requestKey || '')] ?? null,\n    state => state.requests.uploadProgress[type + (requestKey || '')] ?? null,\n    (mutationState, downloadProgress, uploadProgress) => ({\n      loading: mutationState.pending > 0,\n      error: mutationState.error,\n      downloadProgress,\n      uploadProgress,\n    }),\n  );\n\nexport default (state, { type, requestKey }) => {\n  const mutationState = getMutationState(state, type, requestKey);\n\n  if (!mutationState) {\n    return defaultMutation;\n  }\n\n  if (!mutationSelectors.get(mutationState.ref)) {\n    mutationSelectors.set(\n      mutationState.ref,\n      createMutationSelector(type, requestKey),\n    );\n  }\n\n  return mutationSelectors.get(mutationState.ref)(state);\n};\n","import getQuery from './get-query';\n\nexport default props => state => getQuery(state, props);\n","import { createSelectorCreator, defaultMemoize } from 'reselect';\n\nimport { denormalize, getDependentKeys } from '../normalizers';\n\nconst isQueryEqual = (currentVal, previousVal) => {\n  if (\n    currentVal.data !== previousVal.data ||\n    currentVal.pending !== previousVal.pending ||\n    currentVal.error !== previousVal.error ||\n    currentVal.pristine !== previousVal.pristine ||\n    currentVal.downloadProgress !== previousVal.downloadProgress ||\n    currentVal.uploadProgress !== previousVal.uploadProgress\n  ) {\n    return false;\n  }\n\n  if (\n    currentVal.data === null &&\n    (currentVal.multiple !== previousVal.multiple ||\n      currentVal.defaultData !== previousVal.defaultData)\n  ) {\n    return false;\n  }\n\n  if (\n    currentVal.normalized &&\n    currentVal.normalizedData !== previousVal.normalizedData\n  ) {\n    const currentDependencies = getDependentKeys(\n      currentVal.data,\n      currentVal.normalizedData,\n      currentVal.usedKeys,\n    );\n    const previousDependencies = getDependentKeys(\n      previousVal.data,\n      previousVal.normalizedData,\n      previousVal.usedKeys,\n    );\n\n    if (currentDependencies.size !== previousDependencies.size) {\n      return false;\n    }\n\n    for (const k of currentDependencies) {\n      if (\n        !previousDependencies.has(k) ||\n        currentVal.normalizedData[k] !== previousVal.normalizedData[k]\n      ) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n\nconst createCustomSelector = createSelectorCreator(\n  defaultMemoize,\n  isQueryEqual,\n);\n\nconst getData = (data, multiple, defaultData) => {\n  if (data !== null) {\n    return data;\n  }\n\n  if (defaultData !== undefined) {\n    return defaultData;\n  }\n\n  if (multiple) {\n    return [];\n  }\n\n  return data;\n};\n\nconst getQueryState = (state, type, requestKey = '') =>\n  state.requests.queries[type + requestKey];\n\nconst createQuerySelector = (type, requestKey) =>\n  createCustomSelector(\n    (state, defaultData, multiple) => {\n      // in order not to keep queryState.ref reference in selector memoize\n      const {\n        data,\n        pending,\n        error,\n        pristine,\n        normalized,\n        usedKeys,\n      } = getQueryState(state, type, requestKey);\n\n      return {\n        data,\n        pending,\n        error,\n        pristine,\n        normalized,\n        usedKeys,\n        multiple,\n        defaultData,\n        normalizedData: state.requests.normalizedData,\n        downloadProgress:\n          state.requests.downloadProgress[type + (requestKey || '')] ?? null,\n        uploadProgress:\n          state.requests.uploadProgress[type + (requestKey || '')] ?? null,\n      };\n    },\n    ({\n      data,\n      pending,\n      error,\n      pristine,\n      usedKeys,\n      normalized,\n      normalizedData,\n      defaultData,\n      multiple,\n      downloadProgress,\n      uploadProgress,\n    }) => ({\n      data: normalized\n        ? denormalize(\n            getData(data, multiple, defaultData),\n            normalizedData,\n            usedKeys,\n          )\n        : getData(data, multiple, defaultData),\n      loading: pending > 0,\n      error,\n      pristine,\n      downloadProgress,\n      uploadProgress,\n    }),\n  );\n\nconst defaultQuery = {\n  data: null,\n  loading: false,\n  error: null,\n  pristine: true,\n  downloadProgress: null,\n  uploadProgress: null,\n};\n\nconst defaultQueryMultiple = {\n  ...defaultQuery,\n  data: [],\n};\n\nconst defaultQueriesWithCustomData = new Map();\n\nconst getDefaultQuery = (defaultData, multiple) => {\n  if (\n    defaultData !== undefined &&\n    defaultQueriesWithCustomData.get(defaultData)\n  ) {\n    return defaultQueriesWithCustomData.get(defaultData);\n  }\n\n  if (defaultData !== undefined) {\n    const query = { ...defaultQuery, data: defaultData };\n    defaultQueriesWithCustomData.set(defaultData, query);\n    return query;\n  }\n\n  return multiple ? defaultQueryMultiple : defaultQuery;\n};\n\nconst querySelectors = new WeakMap();\n\nexport default (state, { type, requestKey, defaultData, multiple = false }) => {\n  const queryState = getQueryState(state, type, requestKey);\n\n  if (!queryState) {\n    return getDefaultQuery(defaultData, multiple);\n  }\n\n  if (!querySelectors.get(queryState.ref)) {\n    querySelectors.set(queryState.ref, createQuerySelector(type, requestKey));\n  }\n\n  return querySelectors.get(queryState.ref)(state, defaultData, multiple);\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","module.exports = __WEBPACK_EXTERNAL_MODULE_reselect__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/index.js\");\n"],"sourceRoot":""}